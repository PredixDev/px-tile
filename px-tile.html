<!--
    Relative paths assume component is being run from inside an app or another component, where dependencies are flat
    siblings. When this component is run from its own repo (e.g. tests, examples), we assume the server is started with
    'gulp serve' (or similar server setup) to enable correct finding of bower dependencies for local runs.
-->
<link rel="import" href="../polymer/polymer.html" />
<link rel="import" href="px-title-button.html"/>
<link rel="import" href="px-action-buttons.html"/>
<link rel="import" href="css/px-tile-styles.html">

<!--

### Usage

    <px-tile
      title="title text"
      subtitle="subtitle text"
      description="description text"
      overlay-description="overlay description text"
      hoverable 
      title-action-button='{"key":"101","size":"btn--small","type":"btn--icon","icon":"px-nav:favorite"}' 
      action-buttons='{"items":[{"key":"1","size":"btn--small","type":"btn--bare btn--icon","icon":"px-utl:link"},{"key":"2","size":"btn--small","type":"btn--bare btn--icon","icon":"px-utl:copy"},{"key":"3","size":"btn--small","type":"btn--bare btn--icon","icon":"px-utl:download"}]}' >
      <div slot="thumbnail">
         <img src$="../turbine.jpg" />
       </div>
      <div slot="footer">Footer Content Here</div>
    </px-tile>
    
### Buttons and Dropdown reference
    https://github.com/PredixDev/px-buttons-design 
    https://github.com/PredixDev/px-dropdown

### Styling
The following custom properties are also available for styling:

Custom property | Description | Default
:----------------|:-------------|:----------
`--px-tile-width` | Width of the whole tile | `20rem`
`--px-tile-height` | Height of the whole tile | `20rem`
`--px-tile-thumbnail-width` | Width of the thumbnail portion | `20rem`
`--px-tile-thumbnail-height` | Height of the thumbnail portion | `11.66667rem`
`--px-tile-thumbnail-background-color` | Background color of the thumbnail portion | `white`
`--px-tile-background-color` | Background color of the tile | `lightgray`
`--px-tile-text-background-color` | Background color of the the bottom bar of the tile | `lightgray`
`--px-tile-title-color` | Text color for title in the bottom bar | `darkslategray`
`--px-tile-subtitle-color` | Text color for subtitle in the bottom bar | `gray`
`--px-tile-text-color` | Text color for the description text in the bottom bar | `darkslategray`
`--px-tile-overlay-desc-line-height`  | Line Height of overlay description text | `1rem`
`--px-tile-overlay-desc-font-size`  | Font Size of overlay description text | `0.8rem`
`--px-tile-overlay-background-color` | Background color for the overlay of a hoverable tile | `black`
`--px-tile-overlay-text-color` | Text color for the overlay of a hoverable tile | `white`


@element px-tile
@blurb A tile component with two states and a sliding animation.
@homepage index.html
@demo index.html
-->

<dom-module id="px-tile">
  <template>
    <style include="px-tile-styles"></style>
    <div class="tile__container">
      <div id="tile" class="tile shadow-component">
        <div id="thumbnail" class="thumbnail">
          <slot name="thumbnail"></slot>
        </div>
        <template is="dom-if" if="{{_hasData(title, subtitle, titleActionButton.key, actionButtons)}}">
	        <div id="tile-text-wrapper" class="tile-text-wrapper">
	          <template is="dom-if" if="{{_hasTitleSubtitleAndActionBtn(title, subtitle, titleActionButton.key)}}">
		          <div class="title-container">
		            <template is="dom-if" if="{{_hasTitleAndActionBtn(title, titleActionButton.key)}}">
				          <div class="title flex flex--justify">
				            <template is="dom-if" if="{{title}}">
				              <span class="epsilon truncate title-span">{{title}}</span>
				            </template>
				            <span></span> <!-- empty span to right align titleActionButton -->
				            <template is="dom-if" if="{{titleActionButton.key}}">
				              <px-title-button id="pxTitleButton" title-action-button="{{titleActionButton}}" class="title-btn"></px-title-button>
				            </template>
				          </div>
			          </template>
			          <template is="dom-if" if="{{subtitle}}">
			            <div class="subtitle zeta truncate"><span class="subtitle-span">{{subtitle}}</span></div>
			          </template>
		          </div>
	          </template>
	          <template is="dom-if" if="{{description}}">
	            <div class="text zeta"><div class="block-with-text">{{description}}</div></div>
	          </template>
	          <template is="dom-if" if="{{_hasActionButtons}}">
	            <px-action-buttons id="pxActionButtons" action-buttons="{{actionButtons}}"></px-action-buttons>
	          </template>
	        </div>
        </template>
      </div>
      <div id="overlay" class$="overlay {{_getClass(_hovered)}}">
	      <div class="flex flex--col flex--justify full-height">
		      <div class="overlay-top-content">
		        <div class="header-wrapper">
		          <template is="dom-if" if="{{_hasTitleAndActionBtn(title, titleActionButton.key)}}">
			          <div class="title flex flex--justify">
			            <template is="dom-if" if="{{title}}">
			              <span class="epsilon truncate title-span">{{title}}</span>
			            </template>
			            <span></span> <!-- empty span to right align titleActionButton -->
			            <template is="dom-if" if="{{titleActionButton.key}}">
			              <px-title-button id="pxOverlayTitleButton" title-action-button="{{titleActionButton}}" is-overlay="true" class="title-btn"></px-title-button>
			            </template>
			          </div>
		          </template>
		          <template is="dom-if" if="{{subtitle}}">
		            <div class="subtitle zeta truncate"><span class="subtitle-span">{{subtitle}}</span></div>
		          </template>
		        </div>
            <template is="dom-if" if="{{overlayDescription}}">
              <div class="text zeta">{{overlayDescription}}</div>
            </template>
		      </div>
	        <div class="footer-container">
		        <div class="footer">
		          <slot name="footer"></slot>
		        </div>
		        <template is="dom-if" if="{{_hasActionButtons}}">
		          <div class="action-overlay-btns">
		            <px-action-buttons id="pxOverlayActionButtons" action-buttons="{{actionButtons}}" hovered="{{_hovered}}" hover-text-color="{{_hoverTextColor}}"></px-action-buttons>
		          </div>
		        </template>
	        </div>
        </div>
      </div>
    </div>
  </template>
</dom-module>
<script src="dist/px-tile.js"></script>
