{"version":3,"sources":["px-action-buttons.es6.js"],"names":["Polymer","is","properties","actionButtons","type","Object","value","observer","hovered","Boolean","hoverTextColor","String","created","_maxIcons","attached","listen","detached","unlisten","_actionButtonsChanged","_notifyActionChange","_isDropdown","items","length","async","pxDropdown","$$","style","height","multi","x","selected","key","set","dropdown","dom","root","querySelector","button","pxIcon","right","_onSelected","evt","item","detail","model","_handleSelection","val","_itemSelected","_displayValueSelected","fire","_getBtnClazz","clazz","size","_getBtnColor","color","_hoveredChanged","hoveredClazz","replace","indexOf","JSON","parse","stringify"],"mappings":"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","file":"px-action-buttons.js","sourcesContent":["(function() {\n  Polymer({\n\n    is: 'px-action-buttons',\n\n    properties: {\n      /**\n       * Action buttons to display below the description/copy text.\n       * Please refer to px-dropdown (https://github.com/PredixDev/px-dropdown) for a list of supported properties\n       */\n      actionButtons: {\n        type: Object,\n        value: {},\n        observer: '_actionButtonsChanged'\n      },\n      /**\n       * hovered to add additional class on elements when hovering\n       */\n      hovered: {\n        type: Boolean,\n        value: false,\n        observer: '_hoveredChanged'\n      },\n      /**\n       * Current text color of overlay to apply other elements when hovering\n       */\n      hoverTextColor: {\n        type: String,\n        value: ''\n      }\n    },\n    created() {\n      this._maxIcons = 3;\n    },\n    /**\n     * Attach event listeners for dropdown action buttons.\n     */\n    attached() {\n      this.listen(this, 'px-dropdown-selection-changed', '_itemSelected');\n    },\n    /**\n     * Detach event listeners for dropdown action buttons.\n     */\n    detached() {\n      this.unlisten(this, 'px-dropdown-selection-changed', '_itemSelected');\n    },\n    /**\n     * Observer when actionButtons changes.  \n     * Sets flag _isDropdown true if actionButtons size is greater than 3, false otherwise.\n     * If _isDropdown === true it will update px-dropdown options menu\n     */\n    _actionButtonsChanged() {\n      // set _notifyActionChange false to prevent firing px-dropdown-selection-changed while updating the new set of buttons\n      this._notifyActionChange = false;\n      this._isDropdown = this.actionButtons && this.actionButtons.items && this.actionButtons.items.length > this._maxIcons;\n      if(this._isDropdown) {\n        this.async(function() {\n          let pxDropdown = this.$$('#pxDropdown');\n          pxDropdown.style.height = '20px';\n          if(!this.actionButtons.multi) {\n            // remove selected if passed on when is not multi selection\n            for(let x in this.actionButtons.items) {\n              delete this.actionButtons.items[x].selected;\n            }\n          }\n          for(let key in this.actionButtons) {\n            pxDropdown.set(key, this.actionButtons[key]);\n          }\n          this.async(function() {\n            // adjust dropdown to appear aligned to the right\n            let dropdown = Polymer.dom(pxDropdown.root).querySelector('#dropdown');\n            dropdown.set('horizontalAlign', 'right');\n            let button = Polymer.dom(pxDropdown.root).querySelector('#button');\n            this.button = button;\n            this.pxIcon = Polymer.dom(button).querySelector('px-icon');\n            if(this.pxIcon) {\n              this.pxIcon.style.right = '-6px';\n            }\n            this._notifyActionChange = true;\n          });\n        }, 100);\n      } else {\n        this._notifyActionChange = true;\n      }\n    },\n    /**\n     * Callback for on-tap event for action items when the list size is 3 or less\n     */\n    _onSelected(evt) {\n      let item = evt.detail.model || evt.model.item;\n      this._handleSelection({\n        val: item.val, \n        key: item.key\n      });\n    },\n    /**\n     * Callback for selected/unselected action title dropdown items when the list is greater than 3\n     */\n    _itemSelected(evt) {\n      let pxDropdown = this.$$('#pxDropdown');\n      if(this.actionButtons.multi || pxDropdown._displayValueSelected === evt.detail.val) {\n        this._handleSelection(evt.detail);\n      }\n    },\n    /**\n     * Fires px-title-action with selection detail. E.g. {key: \"1\", val: \"Favorite\", selected: true}\n     */\n    _handleSelection(detail) {\n      if(this._notifyActionChange) {\n        this.fire('px-title-on-action-clicked', detail);\n      }\n    },\n    /**\n     * Return button class type and size if any\n     * See https://github.com/PredixDev/px-buttons-design for more details.\n     */\n    _getBtnClazz(item) {\n      let clazz = item.size || '';\n      clazz = clazz + ' ' + (item.type || '');\n      return clazz;\n    },\n    /**\n     * Return style for color.  This property is part of px-button so honor if passed on.\n     */\n    _getBtnColor(item) {\n      let color = '';\n      if(item.color) {\n        color = 'color: ' + item.color + '; stroke: ' + item.color + '; ';\n      }\n      return color;\n    },\n    /**\n     * Callback to set specific classes for overlay container\n     */\n    _hoveredChanged() {\n      // add class to buttons to change color of text when hovering if these are bare buttons\n      if(this.actionButtons.items && this.actionButtons.items.length <= this._maxIcons) {\n        let hoveredClazz = ' btn-overlay ';\n        for(let x in this.actionButtons.items) {\n          let type = this.actionButtons.items[x].type;\n          type = type? type.replace(hoveredClazz,'') : '';\n          if(this.hovered) {\n            if(type.indexOf('btn--bare') !== -1) {\n              type = type + hoveredClazz;\n            }\n          }\n          this.actionButtons.items[x].type = type;\n          this.set('actionButtons.items.' + x, JSON.parse(JSON.stringify(this.actionButtons.items[x])));\n        }\n      } else if(this.pxIcon) {\n        // this is a dropdown then change the color of the icon on hovering\n        this.pxIcon.style.color = '';\n        if(this.hovered) {\n          this.pxIcon.style.color = this.hoverTextColor;\n        }\n      }\n    }\n  });\n})();\n"]}